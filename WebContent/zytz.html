<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type='text/javascript' src='dwr/engine.js'></script>
<script type='text/javascript' src='dwr/interface/Zytz.js'></script>

<script>
var ROWS_PER_PAGE = 10;
$(document).ready(function(){
	showZlzxList(1);
	
	function showZlzxList(page){
		var func = function(data){
			data = JSON.parse(data);
			rowCount = data.size;
			initPaging(page,rowCount);
			data = data.data;
	
			$('.zlzx_box').empty();
			var html = "";
			for(var i=0;i<data.length;i++){
				var topic = data[i];
				
				var timeStr = topic.publishTime;
				topic.publishTime = timeStr.substring(0,timeStr.lastIndexOf("."));
				
				html += 
					'<a class="newsnr" eurl="zytzDetail.jsp?topicId='+topic.id+'"><div class="news_wz2"><div class="news_wzbt2"><span class="news_wzbt_nr left">'+
					topic.title+
					'</span><span class="new_wzbt_day right">'+topic.publishTime+'</span></div>'+
      				'<div class="new_wznr2">'+topic.abs+'</div><span class="readmore">READ MORE+</span></div></a>';
			}
			$('.zlzx_box').append(html);
			$('.newsnr').click(loadDetail);
			$('.return_btn').click(function(){
				$(".tz_detail").addClass("hide");
				$(".tz_list").removeClass("hide");
			});
		}
		Zytz.getShortZytzForPage((page-1)*ROWS_PER_PAGE,ROWS_PER_PAGE,func);
	}
	
	function loadDetail(){
		$(".tz_list").addClass("hide");
		$(".tz_detail").removeClass("hide");
		var url = $(this).attr("eurl");
		$(".detail_html").load(url);
	}
	
	function initPaging(pageActive, rowCount){
		var pageCount = Math.ceil(rowCount/ROWS_PER_PAGE);
		if(pageCount>1){
			var html = '<li><a page="P" aria-label="Previous"> <span aria-hidden="true">&laquo;</span></a></li>';
			for(var i=1;i<=pageCount;i++){
				if(pageActive!=i){
					html += '<li><a page="'+i+'">'+i+'</a></li>';
				}else{
					html += '<li class="active"><a page="'+i+'">'+i+'</a></li>';
				}
			}
			html+='<li><a page="N" aria-label="Next"> <span aria-hidden="true">&raquo;</span></a></li>';
			$(".pagination").html(html);
			$(".paging").removeClass("hide");
		}
		
		//bind events
		$(".paging li").click(function(){
			var pageTo = $(this).children().attr("page");
			if(pageTo == "P"){
				pageTo = 1;
			}else if(pageTo == "N"){
				pageTo = pageCount;
			}else{
				pageTo = parseInt(pageTo);
			}
			showZlzxList(pageTo);
		});
		
	}
});
</script>

   <div class="nyweizhi">当前位置： <a href="#">首页</a> > <a href="#">新闻中心</a> > <font style=" font-weight:bold; color:#1F9AD6">重要通知</font></div>
   <div class="nymainnr">
   <div class="tz_list">
   	<div class="zlzx_box">
   		
 	</div>
	<div class="paging hide">
		<nav>
		<ul class="pagination pagination-lg">
			<li><a page="P" aria-label="Previous"> <span
					aria-hidden="true">&laquo;</span></a></li>
			<li><a page="N" aria-label="Next"> <span aria-hidden="true">&raquo;</span></a></li>
		</ul>
		</nav>
	</div>
	</div>
	
	<div class="tz_detail hide">
		<div class="detail_html"></div>
		<div><button class="return_btn">返回</button></div>
	</div>
	
	</div>
  
</html>
